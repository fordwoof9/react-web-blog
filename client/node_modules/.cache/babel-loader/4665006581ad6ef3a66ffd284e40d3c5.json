{"ast":null,"code":"import _asyncToGenerator from\"/Users/slushieford/Desktop/Works/react-web-blog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/slushieford/Desktop/Works/react-web-blog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/slushieford/Desktop/Works/react-web-blog/client/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import axios from'axios';import{useLocation,useNavigate}from'react-router-dom';import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Write=function Write(){var state=useLocation().state;var _React$useState=React.useState((state===null||state===void 0?void 0:state.title)||''),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _React$useState3=React.useState((state===null||state===void 0?void 0:state.desc)||''),_React$useState4=_slicedToArray(_React$useState3,2),title=_React$useState4[0],setTitle=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),file=_React$useState6[0],setFile=_React$useState6[1];var _React$useState7=React.useState((state===null||state===void 0?void 0:state.cat)||\"\"),_React$useState8=_slicedToArray(_React$useState7,2),cat=_React$useState8[0],setCat=_React$useState8[1];var navigate=useNavigate();var upload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();formData.append('file',file);_context.next=5;return axios.post('/upload',formData);case 5:res=_context.sent;return _context.abrupt(\"return\",res.data);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function upload(){return _ref.apply(this,arguments);};}();var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var imgUrl;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return upload();case 3:imgUrl=_context2.sent;_context2.prev=4;if(!state){_context2.next=10;break;}_context2.next=8;return axios.put(\"/posts/\".concat(state.id),{title:title,desc:value,cat:cat,img:file?imgUrl:\"\"});case 8:_context2.next=12;break;case 10:_context2.next=12;return axios.post(\"/posts/\",{title:title,desc:value,cat:cat,img:file?imgUrl:\"\",date:moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\")});case 12:navigate('/');_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[4,15]]);}));return function handleClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"add\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,placeholder:\"Title\",onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"editorContainer\",children:/*#__PURE__*/_jsx(ReactQuill,{className:\"editor\",theme:\"snow\",value:value,onChange:setValue})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Publish\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Status: \"}),\" Draft\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Visibility: \"}),\" Public\"]}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",name:\"\",onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"label\",{className:\"file\",htmlFor:\"file\",children:\"Upload Image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"Save as a draft\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Publish\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Categories\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:cat===\"art\",name:\"cat\",value:\"art\",id:\"art\",onChange:function onChange(e){return setCat(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"art\",children:\"Art\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:cat===\"science\",name:\"cat\",value:\"science\",id:\"science\",onChange:function onChange(e){return setCat(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"science\",children:\"Science\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:cat===\"tech\",name:\"cat\",value:\"tech\",id:\"tech\",onChange:function onChange(e){return setCat(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tech\",children:\"Tech\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cat\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:cat===\"food\",name:\"cat\",value:\"food\",id:\"food\",onChange:function onChange(e){return setCat(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"food\",children:\"Food\"})]})]})]})]});};export default Write;","map":{"version":3,"sources":["/Users/slushieford/Desktop/Works/react-web-blog/client/src/pages/Write.jsx"],"names":["React","ReactQuill","axios","useLocation","useNavigate","moment","Write","state","useState","title","value","setValue","desc","setTitle","file","setFile","cat","setCat","navigate","upload","formData","FormData","append","post","res","data","console","log","handleClick","e","preventDefault","imgUrl","put","id","img","date","Date","now","format","target","display","files"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport axios from 'axios'\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport moment from \"moment\"\n\nconst Write = () => {\n\n  const state = useLocation().state\n  const [value, setValue] = React.useState(state?.title || '');\n  const [title, setTitle] = React.useState(state?.desc || '');\n  const [file, setFile] = React.useState(null);\n  const [cat, setCat] = React.useState(state?.cat || \"\");\n\n  const navigate = useNavigate()\n\n\n  const upload = async ()=> {\n    try{\n      const formData = new FormData()\n      formData.append('file', file)\n      const res = await axios.post('/upload', formData)\n      return res.data\n    }catch(err){\n      console.log(err)\n    }\n  }\n\n  const handleClick = async e => {\n    e.preventDefault();\n    const imgUrl = await upload()\n    try{\n      state ? await axios.put(`/posts/${state.id}`, {\n        title,\n        desc:value,\n        cat,\n        img:file ? imgUrl : \"\"\n      }) \n      : await axios.post(`/posts/`, {\n        title,\n        desc:value,\n        cat,\n        img:file ? imgUrl : \"\",\n        date: moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\")\n      })\n      navigate('/')\n\n    }catch(err){\n      console.log(err)\n    }\n  }\n\n  return (\n    <div className='add'>\n      <div className='content'>\n        <input type=\"text\" value={title} placeholder='Title' onChange={e=>setTitle(e.target.value)}></input>\n        <div className=\"editorContainer\">\n          <ReactQuill className='editor'theme=\"snow\" value={value} onChange={setValue} />\n        </div>\n      </div>\n      <div className='menu'>\n        <div className='item'>\n          <h1>Publish</h1>\n          <span>\n            <b>Status: </b> Draft\n          </span>\n          <span>\n            <b>Visibility: </b> Public\n          </span>\n          <input style={{display:\"none\"}}type='file' id='file' name='' onChange={e=>setFile(e.target.files[0])}/>\n          <label className='file' htmlFor='file'>Upload Image</label>\n          <div className='buttons'>\n            <button>Save as a draft</button>\n            <button onClick={handleClick}>Publish</button>\n          </div>\n        </div>\n        <div className='item'>\n          <h1>Categories</h1>\n          <div className=\"cat\">\n          <input type=\"radio\" checked = {cat === \"art\"} name=\"cat\" value=\"art\" id=\"art\" onChange={e=>setCat(e.target.value)}></input>\n          <label htmlFor=\"art\">Art</label>\n          </div>\n          <div className=\"cat\">\n          <input type=\"radio\" checked = {cat === \"science\"} name=\"cat\" value=\"science\" id=\"science\" onChange={e=>setCat(e.target.value)}></input>\n          <label htmlFor=\"science\">Science</label>\n          </div>\n          <div className=\"cat\">\n          <input type=\"radio\" checked = {cat === \"tech\"} name=\"cat\" value=\"tech\" id=\"tech\" onChange={e=>setCat(e.target.value)}></input>\n          <label htmlFor=\"tech\">Tech</label>\n          </div>\n          <div className=\"cat\">\n          <input type=\"radio\" checked = {cat === \"food\"} name=\"cat\" value=\"food\" id=\"food\" onChange={e=>setCat(e.target.value)}></input>\n          <label htmlFor=\"food\">Food</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Write"]},"metadata":{},"sourceType":"module"}